<!-- authors: Ricky Perez & Michael Loptien -->
<% provide(:title, "All squares") %>

<!-- page header -->
<%= render partial: 'schools/school_page_header', 
			:locals => { 	:title => "All squares", 
										:subtitle => "view/manage all behavior squares at #{ @school.full_name }"} %>

<!-- Start with square info and the New Square button -->
<div class="row">
	<div class="col-xs-5 col-xs-offset-1">
	  <h4>
      There <%= @squares.count == 1 ? 'is' : 'are' %> 
      <%= pluralize(@squares.count, "behavior square") %> at <%= @school.full_name %>. 
    </h4>
	</div>
	<div class="col-xs-5 text-center">
		<%= button_to new_square_path, method: :get, class: 'col-sm-offset-1 btn btn-lg btn-success' do %>
			<span class="fa fa-fw fa-lg fa-plus-square-o"></span> New Square
		<% end %>
	</div>
</div>

<!-- Start all squares table -->
<div class="row">
	<div class="col-xs-10 col-xs-offset-1">

<br>
<table class= "table table-striped table-hover table-responsive">
  <!-- Squares Table Header-->
  <thead>
	  <tr>
			<th>Icon</th>
		  <th>ID</th>
			<th>Type</th>
			<th>Description</th>
		</tr>
	</thead>

  <!-- Squares Table Body -->
  <tbody>
    <% @squares.each do |each_square| %>
    
			<!--Make the entire line link--> 
      <tr data-link="<%= edit_square_path(each_square) %>">
        
        <!-- Square Color -->
        <td>
          <div class="bsquare-table-icon <%= icon_color(each_square) %>">
            <h4><%= each_square.screen_name %></h4>
            <span class="fa fa-fw fa-lg %>"></span>
				  </div>
				</td>
				
				<!-- Square Name -->
        <td><%= each_square.screen_name %></td>
        
        <!-- If statement for translating  square type int into string -->
        <td><% if each_square.tracking_type == 1 %>
              <p>Duration</p>
            <% elsif each_square.tracking_type == 2 %>
              <p>Frequency</p>
            <% else %>
              <p>Interval</p>
            <% end %>
        </td>
        
        <!-- Square Description -->
        <td><%= truncate each_square.description, :length => 60 %></td>
        
      </tr>
    <% end %>
  </tbody>
</table>
<%= will_paginate %>

  </div>   <!-- col -->
</div>   <!-- row -->

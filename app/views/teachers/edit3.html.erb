<% provide(:title, "Teacher access") %>

<!-- page header -->
<%= render partial: 'teacher_page_header', 
			:locals => { 	:title => "Teacher access", 
										:subtitle => "Admin page 3; edit student access of teacher, #{ @teacher.full_name }"} %>

<% if @teacher.admin %>
<div class="row form-row vertical-align pad20">
	<div class="col-xs-10 col-xs-offset-1">
		<h4>This teacher has <span style="color: red">Admin powers</span>.</h4>
		<br>
		<h4>As an Admin, <%= @teacher.full_name %> has access to all student data.</h4>
	</div>
</div>
<% else %>

<!--Edit Student Access form -->
<%= form_for(@teacher) do |f| %>
	<%= render 'error_messages', object: f.object %>

	<!-- add student to roster -->
	<div class="row form-row vertical-align pad20">
		<div class="col-xs-5 col-md-4 text-right">
			<span class="fa fa-fw fa-plus" style="color: green;"></span>
			<label for="addSquare"><h4>Add Student: </h4></label>
		</div>
		<div class="form-group col-xs-3">
			<%= select_tag 'add_student_id', 
						options_from_collection_for_select(@students_not_in_roster, "id", "full_name"), 
						class: 'form-control' %>
		</div>
		<div class="form-group col-xs-2">
			<%= button_tag(type: 'submit', class: "btn btn-success", name: "edit3_add") do %>
				<span class="fa fa-plus icon-white"></span> 
			<% end %>
		</div>
	</div>   <!-- row -->

	<!-- remove student from roster -->
	<div class="row form-row vertical-align">
		<div class="col-xs-5 col-md-4 text-right">
			<span class="fa fa-fw fa-minus" style="color: red;"></span>
			<label for="removeSquare"><h4>Remove student: </h4></label>
		</div>
		<div class="form-group col-xs-3">
			<%= select_tag 'remove_student_id', 
						options_from_collection_for_select(@students, "id", "full_name"), 
						class: 'form-control' %>
		</div>
		<div class="form-group col-xs-2">
			<%= button_tag(type: 'submit', class: "btn btn-danger", name: "edit3_remove") do %> 
				<span class="fa fa-minus icon-white"></span> 
			<% end %>
		</div>
	</div>   <!-- row -->

<% end %>

<div class="form-spacer"></div>
<div class="row pad20">
  <div class="col-xs-10 col-xs-offset-1">
    <h4>Data for the following students is accessible to teacher, <%= @teacher.full_name %>: </h4>
  </div>
</div>

<!-- show roster of accessible students -->
<% @students.each_with_index do |student, index| %>
	<% if ux_first_row( index) %>
		<div class="row pad40 col-xs-offset-2">
	<% end %>
	<% if ux_next_row( index, 4) %>
		</div>
		<div class="row pad40 col-xs-offset-2">
	<% end %>

	<div class="col-xs-2 text-center">
		<div class="text-center" title="student=<%= student.full_name %>" >
			<div class ="student-icon <%= glow_color(student) %> center-block">
				<span class="fa fa-fw fa-3x <%= fa_icon(student) %>"></span>
			</div>
			<p><span id="<%= student.id %>"><%= ux_student_name(student, 15) %></span></p>
		</div>
	</div>   <!-- col -->

	<% if ux_last_row( index, @students.count) %>
		</div>
	<% end %>
<% end %>   <!-- end foreach student -->

<% end %>   <!-- end if-else admin-->

<!-- a little extra space after name/email -->
<div class="form-spacer">	&nbsp;</div>
<hr class="form-spacer-line">

<!-- done button... back to All Teachers page -->
<div class="row form-row">
	<div class="col-xs-10 col-xs-offset-1">
		<h4>Admin pages DONE... back to All Teachers page: &nbsp; &nbsp; &nbsp;
		<%= link_to 'All teachers', teachers_path, 
						:class => "btn btn-lg btn-primary", :title => "Back to All Teachers page" %>
		</h4>
	</div>
</row>

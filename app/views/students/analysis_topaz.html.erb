<!-- export session data to CSV file -->
<% provide(:title, "Topaz Form") %>

<!--page header -->
<%= render partial: 'student_page_header', 
			:locals => { 	:title => "Topaz Form", 
										:subtitle => "a printable behavior session form for #{ @student.full_name }"} %>

<style>
.topaz-content { font-size: 14px; font-family: Arial; }
.topaz-student-param { font-size: 1.4em; font-weight: bold; }
.topaz-param { text-decoration: underline; }

#topaz-divider-line { width: 80%; margin: 60px auto; 
			border-width: 4px; border-color: #FFC87C; }

#topaz-title { border: 0px solid lightgray; border-radius: 18px; 
			background-color: white; padding: 0px 4px 12px 4px; }

#topaz-table { 	margin: 0 auto; border: 2px solid black; width: 96%; }
#topaz-table td { 
	text-align:center; vertical-align:middle; 
	font-size: 14px; font-family: Verdana;
	border: 2px solid black;
}
#topaz-table th { 
	text-align:center; vertical-align:middle; 
	font-size: 14px; font-family: Verdana;
	border: 2px solid black;
}
#topaz-skinny-table { margin: 0 auto; border: 1px solid black; width: 96%; }
#topaz-skinny-table td { 
	text-align:center; vertical-align:middle; 
	font-size: 12px; font-family: Verdana;
	border: 1px solid black;
	padding: 4px;
}
#topaz-skinny-table th { 
	text-align:center; vertical-align:middle; 
	font-size: 12px; font-family: Verdana;
	border: 1px solid black;
	padding: 4px;
}
#topaz-footer { position: fixed; bottom: 0; color: gray; }

</style>

<div class="row form-row2 pad20 hide-on-print">

	<div class="col-xs-12">
		<h4>Print this Topaz Form to manually record a behavior session with <%= @student.full_name %>.</h4>
		<h4>When printed, only the text below the <span class="color-topaz">topaz line</span> is shown.</h4>
	</div>

	<div class="clearfix"></div>

	<div class="col-xs-12 pad40">
		<button class="btn btn-lg btn-primary" onclick="window.print();">Print form</button>
		&nbsp; &nbsp; &nbsp;
		<%= link_to analysis_path(@student.id), class: 'btn btn-lg btn-default navpanel-darkgray-button' do %>
					<span class="fa fa-fw fa-chevron-left"></span> Back to Analysis page
		<% end %>
	</div>
</div>   <!-- row -->

<div class="hide-on-print">
	<hr id="topaz-divider-line">
</div>


<!-- BEGIN TOPAZ FORM -->

<div class="row form-row2 topaz-content" id="topaz-title">
	<div class="col-xs-6">
		<h3>Topaz Form</h3>
	</div>
	<div class="col-xs-6 text-right pad20">
		Date: _________________________
	</div>

	<div class="clearfix"></div>
	<div class="col-xs-12 pad10">
		Student: <span class="topaz-student-param"> <%= @student.full_name %></span> &nbsp; ~ &nbsp;
		Teacher: <span class="topaz-param"><%= @teacher.full_name %></span> &nbsp; ~ &nbsp;
		Interval time: <span class="topaz-param"><%= @student.session_interval %> mins</span>
	</div>
	<div class="clearfix"></div>
	<div class="col-xs-12 pad20">
		Use this form and use it to manually record a behavior session. 
		Remember to note the actual start and end times of your session below. 
		And write additional notes on the back of the form.
	</div>
</div>   <!-- row -->


<div class="row form-row2">
	<div class="col-xs-12 center-block text-center" 
				style="text-align: center; margin: 0 auto;">

		<% if @num_intervals <= 12 %>
		<table id="topaz-table" class="table table-bordered" >
			<thead>
				<tr>
					<th style="width:5%;"></th>
					<th style="width:15%;">Time</th>
					<% @squares.each do |each_square| %>
						<th style="width: 10%;"><%= each_square.screen_name %></th>
					<% end %>
				</tr>
			</thead>
			<tbody>
				<% for interval in 1..@num_intervals %>
				<tr>
					<td ><%= interval %></td>
					<td ><%= ux_topaz_time_range( @student, interval) %></td>
					<% @squares.each do |each_square| %>
						<td></td>
					<% end %>
				</tr>
				<% end %>

			</tbody>
		</table>
		
		<% else %>
		<table id="topaz-skinny-table" class="table table-bordered" >
			<thead>
				<tr>
					<th style="width:5%;"></th>
					<th style="width:15%;">Time</th>
					<% @squares.each do |each_square| %>
						<th style="width: 10%;"><%= each_square.screen_name %></th>
					<% end %>
				</tr>
			</thead>
			<tbody>
				<% for interval in 1..@num_intervals %>
				<tr>
					<td ><%= interval %></td>
					<td ><%= ux_topaz_time_range( @student, interval) %></td>
					<% @squares.each do |each_square| %>
						<td></td>
					<% end %>
				</tr>
				<% end %>

			</tbody>
		</table>
		<% end %>
	</div>
</div>

<div class="row form-row2 pad40 topaz-content" style="padding: 10px 0px;">
	<br>
	<div class="col-xs-6" >
		Start Time: _________________________
	</div>

	<div class="col-xs-6 text-right">
		End Time: _________________________
	</div>
</div>

<div class="row form-row2 pad20 topaz-content">
	<div class="col-xs-12">
		<strong>Squares key &mdash; </strong>
		<% @squares.each do |each_square| %>
			<strong><%= each_square.screen_name %></strong> = <%= each_square.description %> &nbsp;
		<% end %>
	</div>
</div>

<div class="row form-row2 pad20 topaz-content">
	<div class="col-xs-12">
		<strong>Student instructions &mdash; </strong>
		<%= @student.session_instructions %>
	</div>
</div>

<div class="row text-center display-on-print-only">
	<div id="topaz-footer" class="col-xs-12 text-center">
		GeoGem &copy; 2018
	</div>
</div>
